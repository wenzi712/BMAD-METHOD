# BMad 方法指导原则

BMad Core 和方法是一个自然语言框架，用于 AI 辅助工作流程，结合了人类参与的处理和软件开发。这些原则确保贡献能够保持方法的有效性。

## 核心原则

### 1. 开发代理必须精简

- **最小化开发代理依赖**：在 IDE 中工作的开发代理必须具有最小的上下文开销
- **为代码保存上下文**：每行都很重要 - 开发代理应该专注于编码，而不是文档
- **规划代理可以更大**：在 Web UI 中使用的规划代理（PM、架构师）可以有更复杂的任务和依赖
- **小文件，按需加载**：多个小而专注的文件比带有许多分支的大文件更好

### 2. 自然语言优先

- **一切皆为 Markdown**：代理、任务、模板 - 全部用纯英文编写
- **核心中无代码**：框架本身不包含编程代码，只有自然语言指令
- **自包含模板**：模板被定义为 YAML 文件，具有结构化部分，包括元数据、工作流配置和用于内容生成的详细指令

### 3. 代理和任务设计

- **代理定义角色**：每个代理都是具有特定专业知识的角色（例如，前端开发人员、API 开发人员）
- **任务是程序**：代理遵循的逐步指令以完成工作
- **模板是输出**：带有嵌入生成指令的结构化文档
- **依赖关系很重要**：仅明确声明所需内容

## 实用指南

### 何时添加到核心

- 仅适用于通用软件开发需求
- 不会增加开发代理上下文的负担
- 遵循现有的代理/任务/模板模式

### 何时创建扩展包

- 超出软件开发范围的特定领域需求
- 非技术领域（业务、健康、教育、创意）
- 专业技术领域（游戏、基础设施、移动）
- 大量文档或知识库
- 任何会增加核心代理负担的内容

请参阅 [扩展包指南](expansion-packs_ZH.md) 了解详细示例和想法。

### 代理设计规则

1. **Web/规划代理**：可以有更丰富的上下文、多个任务、广泛的模板
2. **开发代理**：最小依赖、专注于代码生成、精简任务集
3. **所有代理**：清晰的角色、特定的专业知识、明确定义的能力

### 任务编写规则

1. 编写清晰的分步程序
2. 使用 Markdown 格式提高可读性
3. 保持开发代理任务的专注和简洁
4. 规划任务可以更详细
5. **偏好多个小任务，而非一个大型分支任务**
   - 不要使用具有许多条件路径的一个任务
   - 创建多个专注的任务，让代理可以选择
   - 这可以保持上下文开销最小化
6. **重用常见任务** - 不要创建新的文档创建任务
   - 使用现有的 `create-doc` 任务
   - 传递带有结构化部分的适当 YAML 模板
   - 这保持了一致性并减少了重复

### 模板规则

模板遵循 [BMad 文档模板](../common/utils/bmad-doc-template.md) 规范，使用 YAML 格式：

1. **结构**：模板在 YAML 中定义，具有清晰的元数据、工作流配置和部分层次结构
2. **关注点分离**：LLM 的指令位于 `instruction` 字段中，与内容分开
3. **可重用性**：模板与代理无关，可以跨不同代理使用
4. **关键组件**：
   - `template` 块用于元数据（id、名称、版本、输出设置）
   - `workflow` 块用于交互模式配置
   - `sections` 数组定义文档结构，带有嵌套子部分
   - 每个部分都有 `id`、`title` 和 `instruction` 字段
5. **高级功能**：
   - 使用 `{{variable_name}}` 语法进行变量替换
   - 使用 `condition` 字段的条件部分
   - 带有 `repeatable: true` 的可重复部分
   - 带有 `owner` 和 `editors` 字段的代理权限
   - 用于指导的示例数组（从未包含在输出中）
6. **干净的输出**：YAML 结构确保所有处理逻辑与生成的内容分开

## 记住

- 力量在于自然语言编排和人类代理协作，而非代码
- 开发代理负责编码，规划代理负责规划
- 保持开发代理精简以获得最大的编码效率
- 扩展包处理专业领域